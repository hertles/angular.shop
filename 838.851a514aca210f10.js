"use strict";(self.webpackChunkpet=self.webpackChunkpet||[]).push([[838],{838:(y,d,r)=>{r.r(d),r.d(d,{ProfileModule:()=>M});var c=r(6814),i=r(9481),m=r(9397),f=r(7398),t=r(4946),h=r(3474),a=r(1901),v=r(1427);function Z(e,g){if(1&e){const n=t.EpF();t.TgZ(0,"section",1)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"article",2)(4,"h3"),t._uU(5,"\u041c\u043e\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"),t.qZA(),t.TgZ(6,"p"),t._uU(7,"\u0413\u043e\u0440\u043e\u0434: "),t.TgZ(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"p"),t._uU(11,"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441: "),t.TgZ(12,"strong"),t._uU(13),t.qZA()(),t.TgZ(14,"button",3),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.logout())}),t._uU(15,"\u0412\u044b\u0439\u0442\u0438"),t.qZA()(),t.TgZ(16,"article")(17,"h3"),t._uU(18,"\u041c\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0436\u0435\u043b\u0430\u043d\u0438\u0439"),t.qZA(),t._UZ(19,"app-product-list",4),t.ALo(20,"async"),t.qZA()()}if(2&e){const n=g.ngIf,o=t.oxw();t.xp6(2),t.Oqu(n.name),t.xp6(7),t.Oqu(n.homeTown),t.xp6(4),t.Oqu(n.postIndex),t.xp6(6),t.Q6J("products",t.lcZ(20,6,o.products$))("productsError",o.productsError)("productsLoading",o.productsLoading)}}let C=(()=>{class e{constructor(n,o,u,p){this.activatedRoute=n,this.productService=o,this.router=u,this.userService=p,this.productsError=null,this.productsLoading=!0}ngOnInit(){this.user$=this.userService.getCurrentUser(),this.products$=this.productService.getProducts().pipe((0,m.b)({next:()=>{this.productsLoading=!1},error:n=>{this.productsError=n}}),(0,f.U)(n=>n.filter(o=>!0===o.chosen)))}logout(){this.userService.logout(),this.router.navigate(["./login"],{relativeTo:this.activatedRoute})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(i.gz),t.Y36(h.H),t.Y36(i.F0),t.Y36(a.K))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile",4,"ngIf"],[1,"profile"],[1,"profile__data"],[3,"click"],[3,"products","productsError","productsLoading"]],template:function(o,u){1&o&&(t.YNc(0,Z,21,8,"section",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,u.user$))},dependencies:[c.O5,v.X,c.Ov],styles:[".profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:flex-start;align-items:normal}.profile__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:flex-start}"]})}return e})();var s=r(95);const T=[{path:"",component:C,canActivate:[()=>{const e=(0,t.f3M)(a.K),g=(0,t.f3M)(i.F0);return e.getCurrentUser().pipe((0,f.U)(n=>!!n||g.createUrlTree(["profile","login"])))}]},{path:"login",component:(()=>{class e{constructor(n,o){this.userService=n,this.router=o}authorize(n){n.preventDefault(),this.userService.login(this.login,this.password)?this.router.navigate(["/profile"]):this.error="\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(a.K),t.Y36(i.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-form",3,"submit"],["for","login"],["id","login","type","text","name","login",3,"ngModel","ngModelChange"],["for","password"],["id","password","type","password","name","password",3,"ngModel","ngModelChange"],["type","submit"]],template:function(o,u){1&o&&(t.TgZ(0,"section")(1,"form",0),t.NdJ("submit",function(l){return u.authorize(l)}),t.TgZ(2,"label",1),t._uU(3,"\u041b\u043e\u0433\u0438\u043d"),t.qZA(),t.TgZ(4,"input",2),t.NdJ("ngModelChange",function(l){return u.login=l}),t.qZA(),t.TgZ(5,"label",3),t._uU(6,"\u041f\u0430\u0440\u043e\u043b\u044c"),t.qZA(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(l){return u.password=l}),t.qZA(),t._uU(8),t.TgZ(9,"button",5),t._uU(10,"OK"),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("ngModel",u.login),t.xp6(3),t.Q6J("ngModel",u.password),t.xp6(1),t.hij(" ",u.error," "))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],styles:[".login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:flex-start}"]})}return e})()}];let x=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[c.ez,i.Bz.forChild(T)]})}return e})();var A=r(1568);let M=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[c.ez,A.R,s.u5,x]})}return e})()}}]);